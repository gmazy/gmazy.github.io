{"version":3,"sources":["index.js"],"names":["Formi","props","numOfFields","pKysymykset","osaAlue","name","value","persentiiliSarake","csvPersentiili","row","persentiili","trim","replace","split","map","i","forEach","item","length","type","translated","fields","Array","fieldSubmittable","fill","key","pKys","pKysb","translation","fieldsInfo","includes","pkys","val","ii","state","isInputView","submitDisabled","sums","ageField","fieldDisabled","results","handleTransition","bind","handleNumberinput","handleChange","handleFocus","handleReset","this","setState","slice","age","evt","target","checkAllFields","temp_value","event","newValue","nextFieldId","parseInt","id","toLowerCase","isNaN","allFieldsTrue","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","array","number","parseFloat","sisaltopisteet","resultsView","inputView","numberInputs","submittable","text","push","className","onFocus","onChange","autoComplete","tuentarve","persentiiliarvo","sumPoints","tuenTarve","toFixed","onClick","disabled","datab","Arvo","width","height","data","uv","pv","median","cnt","dataKey","stroke","animationDuration","strokeWidth","dot","strokeDasharray","domain","ticks","tick","fontSize","tickCount","dateNow","src","window","print","React","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bbcd7a9b.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nimport { LineChart, Line, CartesianGrid, XAxis, YAxis, Tooltip } from 'recharts';\n//recharts http://recharts.org/en-US/guide/getting-started chartjs?\n\nclass Formi extends React.Component {\n  //_numOfFields = 52; //test\n\n  constructor(props) {\n    let numOfFields = 39; //kysymysten lukumäärä ( 1 kysymys = Kysymys + perustelukysymys )\n    let pKysymykset = [3,4,5,6,7,8,15,18,20,21,22,23,24]; //kysymykset joiden kohdalla on 2 kenttää, kysymys ja perustelu\n    let osaAlue = [//kysymyksen / kysymysparin osa-alue\n      {\n        name:\"KonMT\",\n        value: [5, 6, 7, 8, 9, 10, 15, 18, 19, 20, 30, 31, 32, 33, 34, 37, 38, 39]},\n      {\n        name:\"KonEiMT\",\n        value: [1, 2, 3, 4, 11, 25, 26, 27, 28, 29]},\n      {\n        name:\"Tunne\",\n        value: [21, 22, 23, 24, 35]},\n      {\n        name:\"RelevKäyt\",\n        value: [13, 14, 17, 36]},\n      {\n        name:\"VäärUsk\",\n        value: [12, 16]},\n     ];\n\n    //Persentiilitaulukko\n    let persentiiliSarake = [4,5,6,7,8]; //ikä\n    let csvPersentiili = `\n    1;3;3;3;3;3\n    2;3;3;3;3;3\n    3;3;3;3;3;3\n    4;4;3;3;3;3\n    5;7;3;3;3;3\n    6;11;3;3;3;3\n    7;16;3;3;3;3\n    8;18;3;3;3;3\n    9;25;3;3;3;3\n    10;33;3;3;3;3\n    11;37;3;3;3;3\n    12;44;4;3;3;3\n    13;52;14;4;3;3\n    14;57;16;5;3;3\n    15;64;22;5;3;3\n    16;69;24;6;3;3\n    17;76;28;8;3;3\n    18;80;36;10;3;3\n    19;83;44;11;3;3\n    20;87;48;12;3;3\n    21;90;50;13;3;3\n    22;90;55;14;3;3\n    23;90;57;16;3;3\n    24;90;59;22;5;3\n    25;96;69;24;5;3\n    26;96;76;29;6;3\n    27;97;77;36;9;3\n    28;97;81;37;17;5\n    29;97;86;41;19;7\n    30;97;87;47;28;8\n    31;97;95;64;33;9\n    32;97;97;72;52;10\n    33;97;97;83;63;17\n    34;97;97;87;71;30\n    35;97;97;89;76;39\n    36;97;97;97;82;62\n    37;97;97;97;87;78\n    38;97;97;97;87;91\n    39;97;97;97;87;91\n    40;97;97;97;87;91`;\n    //CSV taulukko js-taulukoksi:\n    let row = {};\n    let persentiili = {};\n    csvPersentiili = csvPersentiili.trim().replace(/ /g, \"\");//remove spaces\n    csvPersentiili = csvPersentiili.split(/\\r?\\n/);//split newlines\n    csvPersentiili = csvPersentiili.map(i => i.trim().split(\";\"))//split \";\"\n    csvPersentiili.forEach( item => {\n      row = {};\n      for(let i=0; i<persentiiliSarake.length; i++){\n        row[persentiiliSarake[i]] = item[i+1].trim();\n      }\n      persentiili[item[0]] = row; \n    });\n\n    numOfFields += pKysymykset.length; //total number of fields \n    let fields = Array(numOfFields); //field values\n    let fieldSubmittable = Array(numOfFields).fill(false);\n    //Testausarvoja:\n    //fields = [1,0,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,0,0,1,1,1,1,0,1,1,1,1,1,0,1,1,0,0,1,1,1,1,1,1,1,1,1,1,0,1,1]; //testausarvoja\n    //fieldSubmittable = Array(numOfFields).fill(true);\n\n    //valmistellaan info taulukko jonka pohjalta luodaan kentät, ja translation taulukko\n    let key = 0\n    let pKys = false;\n    let pKysb = 0; //kysymyksen tyyppi 0=kysymys ilman perustelukysymystä, 1, 2 = perustelukysymys\n    let type;\n    let translation = [];\n    let fieldsInfo = [];\n    for(let i=0; i<numOfFields; i++){\n      if(pKysymykset.includes(key) && !pKys) {\n        pKys = true;\n        type = \"Perustelukysymys\";\n        pKysb = 2;\n      }\n      else {\n        if(pKysymykset.includes(key+1)) {\n          pKysb = 1;\n        }\n        else {\n          pKysb = 0;\n        }\n        pKys = false;\n        key++; //samalla key:llä voi olla monta kysymystä, varsinainen ja perustelusk.\n      }\n      if(pKysymykset.includes(key) && !pKys) {\n      }\n      fieldsInfo[i] = {key: key, pkys: pKysb, type: type, val: fields[i]}\n      //luodaan translation taulukko\n      if(!pKys){ translation[key] = i; }\n    }\n\n    let name;\n    let translated;\n    //päivitetään osaAlueet absoluuttisilla kentän numeroilla\n    for(let i=0; i<osaAlue.length; i++){\n      name = osaAlue[i].name;\n      for(let ii=0; ii<osaAlue[i].value.length; ii++){\n        translated = translation[ osaAlue[i].value[ii] ];\n        osaAlue[i].value[ii] = translated\n        fieldsInfo[translated].type = name;\n      }\n    }\n\n    //päivitetään pKysymykset absoluuttisilla kentän numeroilla   \n    pKysymykset = pKysymykset.map(i => translation[i])\n\n    super(props);\n    this.state = {\n      isInputView: true,\n      submitDisabled: true,\n      numOfFields: numOfFields,\n      fieldsInfo: fieldsInfo,\n      sums: [],\n      ageField: \"\", \n      persentiili: persentiili,\n      fieldSubmittable: fieldSubmittable,\n      fieldDisabled: Array(numOfFields).fill(false),\n      results: \"\",\n    };\n\n\n    this.handleTransition = this.handleTransition.bind(this);\n    //this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleNumberinput = this.handleNumberinput.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleFocus = this.handleFocus.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n  }\n \n  handleTransition(){ //toggle\n    this.setState({isInputView: !this.state.isInputView})\n  }\n\n  handleReset(){\n    //this.setState({fields: Array(this.state.numOfFields).fill(\"\"), results: \"\", submitDisabled: true})\n\n    const fieldsInfo = this.state.fieldsInfo.slice(); //copy array with slice()\n    for(let i=0; i<fieldsInfo.length; i++){\n      fieldsInfo[i].val=\"\";\n    }\n    this.setState({fieldsInfo: fieldsInfo});\n    \n    this.setState({fieldSubmittable: this.state.fieldSubmittable.slice().fill(false)});\n    this.setState({fieldDisabled: this.state.fieldDisabled.slice().fill(false)});\n    this.setState({submitDisabled: true});\n\n    this.setState({age: \"\"});\n  }\n\n  handleChange(evt){ \n    this.setState({[evt.target.name]: evt.target.value},() => this.checkAllFields());\n  }\n\n  handleFocus(evt){ //cursor at the end\n    var temp_value = evt.target.value\n    evt.target.value = ''\n    evt.target.value = temp_value\n  }\n\n  handleNumberinput(event){\n    let newValue = event.target.value.replace(/[^01xX]/g, '').slice(-1); //keep: 0 1 x X\n\n    const fieldsInfo = this.state.fieldsInfo.slice(); //copy array with slice()\n    const fieldSubmittable = this.state.fieldSubmittable.slice();\n\n    ///disabloidaan perustelykysymys kenttiä tarvittaessa\n    const fieldDisabled = this.state.fieldDisabled.slice();\n    const nextFieldId = parseInt(event.target.id)+1\n    if(fieldDisabled.length > nextFieldId) { //toimiiko\n      if(this.state.fieldsInfo[parseInt(event.target.id)].pkys==\"1\") {\n        if(newValue==0 || newValue.toLowerCase()==\"x\") {\n          fieldDisabled[nextFieldId] = true; //disable and hide field \n          fieldsInfo[nextFieldId].val = \"x\"; //set value 0\n          fieldSubmittable[nextFieldId] = true;\n        }\n        else {\n          fieldDisabled[nextFieldId] = false;\n          if(fieldsInfo[nextFieldId].val != \"\") { //set undefined\n            fieldsInfo[nextFieldId].val = \"\";\n          }\n          fieldSubmittable[nextFieldId] = false;\n        }\n      }\n    }\n    this.setState({fieldDisabled: fieldDisabled}); //update states  \n\n    //Update changed field value\n    //const fieldsInfo = this.state.fieldsInfo.slice(); //copy array with slice()\n    fieldsInfo[event.target.id].val = newValue;\n    //.replace(/[^\\d.-]/g, ''); //keep: digits, comma, -\n    this.setState({fieldsInfo: fieldsInfo}); //toimii ilmankin\n\n    //Update fieldSubmittable true/false\n    //const fieldSubmittable = this.state.fieldSubmittable.slice();\n    function checkField(value) {\n      return (value!==\"\" && !isNaN(value) || value.toLowerCase()==\"x\")\n    }\n    fieldSubmittable[event.target.id] = checkField(newValue);\n    this.setState({fieldSubmittable: fieldSubmittable},() => this.checkAllFields()); //update states  \n\n  }\n\n  checkAllFields(){\n        //Checking full FieldSubmittable array\n        let allFieldsTrue = true\n        for (let i of this.state.fieldSubmittable) {\n          if(i===false) { allFieldsTrue = false }\n        }\n        //Check Age\n        if(this.state.ageField==\"\"){allFieldsTrue = false}\n    \n        //Enable/disable submit\n        this.setState({submitDisabled: !allFieldsTrue}); \n  }\n\n  dateNow() {\n    var today = new Date();\n    var dd = String(today.getDate()).padStart(0, '0');\n    var mm = String(today.getMonth() + 1).padStart(0, '0'); //January is 0!\n    var yyyy = today.getFullYear();\n    today = dd + '.' + mm + '.' + yyyy;\n    return today\n  }\n  \n  sumPoints(array, type= \"type\"){\n    let sums = []\n    let number;\n    array.forEach( item => {\n      if(typeof(sums[item[type]]) === 'undefined') {\n        sums[item[type]] = 0;\n      }\n      number = parseFloat(item.val);\n      if(!isNaN(number)) { sums[item[type]] += number; }\n      }\n    );\n    return sums;\n  }\n\n  tuenTarve(persentiili){\n    if(isNaN(parseFloat(persentiili))) {return \"-\";}\n    if(persentiili<=6) {return \"Selvästi tuen tarpeessa\";}\n    if (persentiili<=15) {return \"Tuen tarpeessa\";}\n    if (persentiili<=25) {return \"Seurattava\";}\n    else {return \"Ei tuen tarpeessa\";}\n  }\n\n  persentiiliarvo(sisaltopisteet,age){\n    if(typeof(this.state.persentiili[sisaltopisteet]) === 'undefined') { return \"\"; }\n    if(typeof(this.state.persentiili[sisaltopisteet][age]) === 'undefined') { return \"Persentiiliarvo on saatavilla vain 4-8 vuotiaille.\"; }\n    return this.state.persentiili[sisaltopisteet][age];\n  }\n  \n  render() {\n    let resultsView;\n    let inputView;\n    let numberInputs = [];\n\n    //making fields\n    for(let i=0; i<this.state.fieldsInfo.length; i++){\n      let submittable = this.state.fieldSubmittable[i] ? 'submittable' : 'notsubmittable' ; \n      if(this.state.fieldDisabled[i]){submittable='disabled'};\n      let text = this.state.fieldsInfo[i].type===\"Perustelukysymys\" ? this.state.fieldsInfo[i].key+'b:' : this.state.fieldsInfo[i].key+':'; \n      numberInputs.push(\n      <div key={i} id={i}>\n        <span className=\"number\">{text}</span> <input id={i} type=\"text\" className={submittable} onFocus={this.handleFocus} onChange={this.handleNumberinput} value={this.state.fieldsInfo[i].val} autoComplete=\"off\"/>\n      </div>\n      )\n    }\n\n    let results = [];\n\n    //laske taulukkoon yhteispisteet kaikille osa-alueille\n    let type = this.sumPoints(this.state.fieldsInfo,\"type\");\n    let pkys = this.sumPoints(this.state.fieldsInfo,\"pkys\");\n   \n    let sisaltopisteet = type[\"KonEiMT\"]+type[\"KonMT\"]+type[\"VäärUsk\"]+type[\"RelevKäyt\"]+type[\"Tunne\"];\n    \n    let tuentarve;\n    let persentiiliarvo;\n    \n    if(this.state.ageField) {\n      persentiiliarvo = this.persentiiliarvo(sisaltopisteet,this.state.ageField);\n      tuentarve = this.tuenTarve(persentiiliarvo);\n    }\n    \n    //results, korjaa nan, suhteellisista pisteistä jos kaikki on 0\n    if(!this.state.submitDisabled) {\n      results.push(\n        <div key=\"results-field\">\n          <br />\n          KonEiMT: &nbsp; {type[\"KonEiMT\"]} /10<br />\n          KonMT: &nbsp; {type[\"KonMT\"]} /18<br />\n          VäärUsk: &nbsp; {type[\"VäärUsk\"]} /2<br />\n          RelevKäyt: &nbsp; {type[\"RelevKäyt\"]} /4<br />\n          Tunne: &nbsp; {type[\"Tunne\"]} /5<br />\n          Sisältöpisteet: &nbsp; {sisaltopisteet} /39<br />\n          <br />\n          Perustelukysymysten pisteet: &nbsp; {pkys[2]} /13 <br />\n          Perustelukysymysten suhteelliset pisteet: {(pkys[2]/pkys[1]*100).toFixed(1)}<br />\n          <br />\n          Persentiiliarvo: {persentiiliarvo} <br />\n          Tuen tarve: {tuentarve}<br />\n          <br />\n        </div>\n      )\n    }\n      //Perustelukysymys suhteelliset pisteet: = oikeiden vastausten määrä osioissa, joissa perustelukysymys\n\n    if(this.state.isInputView){ //Aloitusnäkymä\n    inputView = (\n      <div>\n        <div className=\"inputview\">\n        <form><h2>Pragma-testi</h2>\n        <button className=\"resetbutton\" type='button' onClick={this.handleReset}>Tyhjennä</button>\n        <br /><b>Täyttöohje:</b><br />\n        Merkitse kysymysten pisteet numeroin ja välistä jätetty kysymys merkillä X.<br /><br /><br />\n          {/*<div className=\"maa\">\n            <b>Normiaineisto: </b>\n            <select>\n              <option key=\"maa\" value=\"fi\">Suomi</option>\n            </select>\n            </div>\n          */}   \n          <div className=\"age\"><b>Lapsen ikä:</b> <input type=\"text\" name=\"ageField\" onChange={this.handleChange} value={this.state.ageField} autoComplete=\"off\"/></div>\n          <br /><br /><b>Kysymykset:</b>  <br />\n          <div className=\"numberinputs\">\n            {numberInputs}\n          </div>\n          \n       \n          <button type='button' onClick={this.handleTransition} disabled={this.state.submitDisabled}>Tulostus</button>\n          \n        </form>\n        </div>\n        {results}\n      </div>\n\n    );}\n\n    else { //Tulosnäkymä\n\n      const taulukkoData = [\n        {\n          name: '4', uv: 7, pv: 9, median: 12, cnt: 19,},\n        {\n          name: '5', uv: 14, pv: 16, median: 22, cnt: 28,},\n        {\n          name: '6', uv: 23, pv: 25, median: 31, cnt: 33,},\n        {\n          name: '7', uv: 28, pv: 29, median: 32, cnt: 36,},\n        {\n          name: '8', uv: 33, pv: 33, median: 36, cnt: 37,},\n      ];\n      \n\n      let datab = []\n      for(let i=0; i<this.state.fieldsInfo.length; i++){\n        datab.push({key: i, name: \"Arvo \"+(i+1), Arvo: this.state.fieldsInfo[i]},)\n      }\n      //console.log(datab)\n      \n      const renderLineChart = (\n        <div>\n        <LineChart width={600} height={300} data={taulukkoData}>\n          <Line dataKey=\"cnt\" stroke=\"#fcba03\" name=\"Yläraja\" animationDuration={800} strokeWidth={1} dot={false} />\n          <Line dataKey=\"median\" stroke=\"#808080\" name=\"Mediaani\" animationDuration={800} strokeWidth={1} dot={false} />\n          <Line dataKey=\"pv\" stroke=\"#ff8400\" animationDuration={800} strokeWidth={1} dot={false} />\n          <Line dataKey=\"uv\" stroke=\"#0380fc\" animationDuration={500} strokeWidth={1} dot={false} />\n          \n          <CartesianGrid stroke=\"#ccc\" strokeDasharray=\"2 2\"/>\n          <XAxis dataKey=\"name\" type=\"number\" domain={[3.5, 8.5]} ticks={[3.5, 4.5, 5.5, 6.5, 7.5, 8.5]} tick={{fontSize: 14}}/>\n\n          <YAxis tickCount={9} />\n          <Tooltip />\n        </LineChart>\n        Mediaanikäyrä (50%:n persentiilikäyrä)<br />\n        Tyypillinen suoritusalue (15 %-85 % persentiilikäyrien väliin jäävä alue)<br />\n        Tyypillisen suoritusalueen alaraja (16 %-25% persentiiliä)<br />\n        <br />\n        </div>\n      );\n\n      \n      resultsView = (\n      <div className=\"resultsView\">\n        <button onClick={this.handleTransition}>Takaisin</button>\n        <h2>Pragma-testi</h2><br />\n\n        Testaajan nimi: __________________________________<br /><br />\n        Lapsen nimi: __________________________________<br /><br />\n        Lapsen ikä: {this.state.ageField}<br /><br />\n        Testauspäivämäärä: {this.dateNow()}<br />\n        {results}\n        <br />\n        <img src=\"chart.png\" /><br /><br />\n        (ks. tarkemmin kaavion tulkinnasta testikäsikirjan liite 4)<br />\n        <br />\n        <button type='button' onClick={window.print}>Tulosta</button>\n        <br />\n        \n        \n      </div>\n      );\n    }\n\n    return (\n      <div>\n        {inputView}\n        {resultsView}\n      </div>\n    );\n  }\n}\n// ========================================\nReactDOM.render(<Formi />, document.getElementById(\"root\"));\n"],"sourceRoot":""}