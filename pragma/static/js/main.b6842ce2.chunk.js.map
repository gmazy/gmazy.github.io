{"version":3,"sources":["index.js"],"names":["Formi","props","numOfFields","pKysymykset","osaAlue","name","value","persentiiliSarake","csvPersentiili","row","persentiili","trim","replace","split","map","i","forEach","item","length","type","translated","fields","Array","fill","fieldSubmittable","key","pKys","pKysb","translation","fieldsInfo","includes","pkys","val","ii","state","isInputView","submitDisabled","automDisabledFields","sums","ageField","ageFieldPromptText","fieldDisabled","results","handleTransition","bind","handleNumberinput","handleChange","handleFocus","handleReset","this","setState","slice","evt","newValue","target","checkAllFields","currentField","numFields","id","parseInt","element","document","getElementById","focus","activeElement","blur","moveToNextField","temp_value","event","nextFieldId","toLowerCase","toString","currentId","virheet","push","fieldNum","isNaN","allFieldsTrue","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","array","number","parseFloat","sisaltopisteet","age","resultsView","inputView","numberInputs","submittable","text","className","onFocus","onChange","autoComplete","sumPoints","suhtlPisteet","toFixed","persentiiliarvo","tuentarve","tuenTarve","onClick","disabled","taulukkoData","uv","pv","median","alue","found","find","score","datab","Arvo","renderLineChart","width","height","data","stroke","vertical","dataKey","domain","interval","tickLine","padding","left","right","unit","tick","x","y","payload","offset","textAnchor","x1","y1","x2","y2","stroke-width","tickCount","minTickGap","label","angle","position","strokeWidth","isAnimationActive","dot","strokeDasharray","dateNow","src","alt","window","print","React","Component","ReactDOM","render"],"mappings":"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","file":"static/js/main.b6842ce2.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nimport {ComposedChart, Scatter, LineChart, Line, CartesianGrid,  XAxis, YAxis, Tooltip, Dot, Area, Label } from 'recharts';\n//recharts http://recharts.org/en-US/guide/getting-started chartjs?\n\nclass Formi extends React.Component {\n  //_numOfFields = 52; //test\n\n  constructor(props) {\n    let numOfFields = 39; //kysymysten lukumäärä ( 1 kysymys = Kysymys + perustelukysymys )\n    let pKysymykset = [3,4,5,6,7,8,15,18,20,21,22,23,24]; //kysymykset joiden kohdalla on 2 kenttää, kysymys ja perustelu\n    let osaAlue = [//kysymyksen / kysymysparin osa-alue\n      {\n        name:\"KonMT\",\n        value: [5, 6, 7, 8, 9, 10, 15, 18, 19, 20, 30, 31, 32, 33, 34, 37, 38, 39]},\n      {\n        name:\"KonEiMT\",\n        value: [1, 2, 3, 4, 11, 25, 26, 27, 28, 29]},\n      {\n        name:\"Tunne\",\n        value: [21, 22, 23, 24, 35]},\n      {\n        name:\"RelevKäyt\",\n        value: [13, 14, 17, 36]},\n      {\n        name:\"VäärUsk\",\n        value: [12, 16]},\n     ];\n\n    //Persentiilitaulukko\n    let persentiiliSarake = [4,5,6,7,8]; //ikä\n    let csvPersentiili = `\n    1;3;3;3;3;3\n    2;3;3;3;3;3\n    3;3;3;3;3;3\n    4;4;3;3;3;3\n    5;7;3;3;3;3\n    6;11;3;3;3;3\n    7;16;3;3;3;3\n    8;18;3;3;3;3\n    9;25;3;3;3;3\n    10;33;3;3;3;3\n    11;37;3;3;3;3\n    12;44;4;3;3;3\n    13;52;14;4;3;3\n    14;57;16;5;3;3\n    15;64;22;5;3;3\n    16;69;24;6;3;3\n    17;76;28;8;3;3\n    18;80;36;10;3;3\n    19;83;44;11;3;3\n    20;87;48;12;3;3\n    21;90;50;13;3;3\n    22;90;55;14;3;3\n    23;90;57;16;3;3\n    24;90;59;22;5;3\n    25;96;69;24;5;3\n    26;96;76;29;6;3\n    27;97;77;36;9;3\n    28;97;81;37;17;5\n    29;97;86;41;19;7\n    30;97;87;47;28;8\n    31;97;95;64;33;9\n    32;97;97;72;52;10\n    33;97;97;83;63;17\n    34;97;97;87;71;30\n    35;97;97;89;76;39\n    36;97;97;97;82;62\n    37;97;97;97;87;78\n    38;97;97;97;87;91\n    39;97;97;97;87;91\n    40;97;97;97;87;91`;\n    //CSV taulukko js-taulukoksi:\n    let row = {};\n    let persentiili = {};\n    csvPersentiili = csvPersentiili.trim().replace(/ /g, \"\");//remove spaces\n    csvPersentiili = csvPersentiili.split(/\\r?\\n/);//split newlines\n    csvPersentiili = csvPersentiili.map(i => i.trim().split(\";\"))//split \";\"\n    csvPersentiili.forEach( item => {\n      row = {};\n      for(let i=0; i<persentiiliSarake.length; i++){\n        row[persentiiliSarake[i]] = item[i+1].trim();\n      }\n      persentiili[item[0]] = row; \n    });\n\n    numOfFields += pKysymykset.length; //total number of fields \n    let fields = Array(numOfFields).fill(\"\"); //field values\n    let fieldSubmittable = Array(numOfFields).fill(false);\n    //Testausarvoja:\n    //fields = [1,0,1,1,1,0,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,0,0,1,1,1,1,0,1,1,1,1,1,0,1,1,0,0,1,1,1,1,1,1,1,1,1,1,0,1,1]; //testausarvoja\n    //fieldSubmittable = Array(numOfFields).fill(true);\n\n    //valmistellaan info taulukko jonka pohjalta luodaan kentät, ja translation taulukko\n    let key = 0\n    let pKys = false;\n    let pKysb = 0; //kysymyksen tyyppi 0=kysymys ilman perustelukysymystä, 1, 2 = perustelukysymys\n    let type;\n    let translation = [];\n    let fieldsInfo = [];\n    for(let i=0; i<numOfFields; i++){\n      if(pKysymykset.includes(key) && !pKys) {\n        pKys = true;\n        type = \"Perustelukysymys\";\n        pKysb = 2;\n      }\n      else {\n        if(pKysymykset.includes(key+1)) {\n          pKysb = 1;\n        }\n        else {\n          pKysb = 0;\n        }\n        pKys = false;\n        key++; //samalla key:llä voi olla monta kysymystä, varsinainen ja perusteluk.\n      }\n      if(pKysymykset.includes(key) && !pKys) {\n      }\n      fieldsInfo[i] = {key: key, pkys: pKysb, type: type, val: fields[i]}\n      //luodaan translation taulukko\n      if(!pKys){ translation[key] = i; }\n    }\n\n    let name;\n    let translated;\n    //päivitetään osaAlueet absoluuttisilla kentän numeroilla\n    for(let i=0; i<osaAlue.length; i++){\n      name = osaAlue[i].name;\n      for(let ii=0; ii<osaAlue[i].value.length; ii++){\n        translated = translation[ osaAlue[i].value[ii] ];\n        osaAlue[i].value[ii] = translated\n        fieldsInfo[translated].type = name;\n      }\n    }\n\n    //päivitetään pKysymykset absoluuttisilla kentän numeroilla   \n    pKysymykset = pKysymykset.map(i => translation[i])\n\n    super(props);\n    this.state = {\n      isInputView: true,\n      submitDisabled: true,\n      numOfFields: numOfFields,\n      fieldsInfo: fieldsInfo,\n      automDisabledFields: [],\n      sums: [],\n      ageField: \"\", \n      ageFieldPromptText: \"\",\n      persentiili: persentiili,\n      fieldSubmittable: fieldSubmittable,\n      fieldDisabled: Array(numOfFields).fill(false),\n      results: \"\",\n    };\n\n\n    this.handleTransition = this.handleTransition.bind(this);\n    //this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleNumberinput = this.handleNumberinput.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleFocus = this.handleFocus.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n  }\n \n  handleTransition(){ //toggle\n    this.setState({isInputView: !this.state.isInputView})\n  }\n\n  handleReset(){\n    const fieldsInfo = this.state.fieldsInfo.slice(); //reset fieldsInfo values\n    for(let i=0; i<fieldsInfo.length; i++){ fieldsInfo[i].val=\"\"; }\n    this.setState({fieldsInfo: fieldsInfo});\n    \n    this.setState({fieldSubmittable: this.state.fieldSubmittable.slice().fill(false)});\n    this.setState({fieldDisabled: this.state.fieldDisabled.slice().fill(false)});\n\n    this.setState({submitDisabled: true, ageField: \"\", ageFieldPromptText: \"\"});\n  }\n\n  handleChange(evt){ //agefield\n    let newValue = evt.target.value.replace(/[^x45678]/g, '').slice(-1); //keep x, numbers 4-8\n    this.setState({[evt.target.name]: newValue},() => this.checkAllFields());\n\n    if(newValue!==\"\") { this.setState({ageFieldPromptText: \"\"}); }\n  }\n\n  moveToNextField(currentField){\n    let numFields = this.state.fieldsInfo.length-1; //number of fields = 52\n    let id = parseInt(currentField);\n    while (id < numFields) {//find next allowed id\n      id++;\n      if(this.state.fieldDisabled[id]===false) { break; } \n    }\n    const element = document.getElementById(id);\n    if(element !== null) {element.focus();}\n    if(parseInt(currentField)===numFields) { document.activeElement.blur(); } //fix, prevent last field selection\n  }\n\n\n  handleFocus(evt){\n    //moving selection to allowed field (tabulator)\n    if(this.state.fieldDisabled[evt.target.id]===true) { //true = field not allowed for select\n      this.moveToNextField(evt.target.id);\n    }\n\n    //cursor at the end\n    let temp_value = evt.target.value\n    evt.target.value = ''\n    evt.target.value = temp_value\n  }\n\n  handleNumberinput(event){\n    let newValue = event.target.value.replace(/[^01xX]/g, '').slice(-1); //keep: 0 1 x X\n\n    const fieldsInfo = this.state.fieldsInfo.slice(); //copy array with slice()\n    const fieldSubmittable = this.state.fieldSubmittable.slice();\n\n    ///disabloidaan perustelykysymys kenttiä tarvittaessa\n    const fieldDisabled = this.state.fieldDisabled.slice();\n    const nextFieldId = parseInt(event.target.id)+1\n    if(fieldDisabled.length > nextFieldId) { //skip if last field\n      if(this.state.fieldsInfo[parseInt(event.target.id)].pkys===1) { //pkys 1 = kysymys jolla perustelukysymys\n        if(newValue===\"0\" || newValue.toLowerCase()===\"x\") {\n          fieldDisabled[nextFieldId] = true; //disable and hide field \n          fieldsInfo[nextFieldId].val = \"x\"; //set value to x\n          fieldSubmittable[nextFieldId] = true;\n        }\n        else {\n          fieldDisabled[nextFieldId] = false;\n          if(fieldsInfo[nextFieldId].val.toString().toLowerCase()===\"x\") {//emptying fields with x \n            fieldsInfo[nextFieldId].val = \"\"; \n            fieldSubmittable[nextFieldId] = false;\n          }\n        }\n      }\n    }\n    //this.setState({fieldDisabled: fieldDisabled}); //update states  \n\n    let currentId = event.target.id;\n\n    this.setState({fieldDisabled: fieldDisabled},() => {\n      if(newValue!==\"\") { this.moveToNextField(currentId); } //move selection to next field\n    });\n\n\n    //Update changed field value\n    //const fieldsInfo = this.state.fieldsInfo.slice(); //copy array with slice()\n    fieldsInfo[event.target.id].val = newValue;\n    //.replace(/[^\\d.-]/g, ''); //keep: digits, comma, -\n\n\n    //lasketaan peräkkäisten virheiden määrä ei perustelukysymyksissä välillä 0-20 (kysymys 20 = kenttä 29)\n    let virheet = 0;\n    let i = 0;\n    for (i = 0; i < 29; i++) { \n      if(fieldsInfo[i].type !== \"Perustelukysymys\") {\n        if(fieldsInfo[i].val === \"0\") {\n          virheet++;\n        }\n        else {\n          virheet=0;\n        }\n        if(virheet === 6) { break; }\n      }\n    }\n\n\n    if(virheet === 6) { //jos 6 tai enemmän peräkkäisiä virheitä\n      \n      if(this.state.automDisabledFields.length === 0){\n        let automDisabledFields = [];\n        for (i = 0; i < 29; i++) {\n          if(fieldsInfo[i].val === \"\") {\n            fieldDisabled[i] = true;\n            automDisabledFields.push(i);\n            fieldsInfo[i].val = \"x\";\n            fieldSubmittable[i] = true;\n          }\n        }\n        for (i = 47; i < 52; i++) {\n          if(fieldsInfo[i].val === \"\") {\n            fieldDisabled[i] = true; \n            automDisabledFields.push(i);\n            fieldsInfo[i].val = \"x\";\n            fieldSubmittable[i] = true;\n          }\n        }\n        this.setState({automDisabledFields: automDisabledFields});\n      }\n    }\n    else {\n      if(this.state.automDisabledFields.length > 0) {\n        this.state.automDisabledFields.forEach( fieldNum => {\n          fieldDisabled[fieldNum] = false; \n          fieldsInfo[fieldNum].val = \"\";\n          fieldSubmittable[fieldNum] = false;\n        });\n        this.setState({automDisabledFields: []});\n      }\n    }\n\n  \n\n    this.setState({fieldsInfo: fieldsInfo}); //toimii ilmankin\n\n    //Update fieldSubmittable true/false\n    //const fieldSubmittable = this.state.fieldSubmittable.slice();\n    function checkField(value) {\n      return ((value!==\"\" && !isNaN(value)) || value.toLowerCase()===\"x\")\n    }\n    fieldSubmittable[event.target.id] = checkField(newValue);\n    this.setState({fieldSubmittable: fieldSubmittable},() => this.checkAllFields()); //update states  \n\n    //if(newValue!==\"\") {this.moveToNextField(tmp);}//move to next field\n  }\n\n  checkAllFields(){\n        //Checking full FieldSubmittable array\n        let allFieldsTrue = true\n        for (let i of this.state.fieldSubmittable) {\n          if(i===false) { allFieldsTrue = false }\n        }\n        //Check Age\n        if(this.state.ageField===\"\") {\n          allFieldsTrue = false\n          this.setState({ageFieldPromptText: \"pakollinen kenttä\"});\n        }\n    \n        //Enable/disable submit\n        this.setState({submitDisabled: !allFieldsTrue}); \n  }\n\n  dateNow() {\n    let today = new Date();\n    let dd = String(today.getDate()).padStart(0, '0');\n    let mm = String(today.getMonth() + 1).padStart(0, '0'); //January is 0!\n    let yyyy = today.getFullYear();\n    today = dd + '.' + mm + '.' + yyyy;\n    return today\n  }\n  \n  sumPoints(array, type= \"type\"){\n    let sums = []\n    let number;\n    array.forEach( item => {\n      if(typeof(sums[item[type]]) === 'undefined') {\n        sums[item[type]] = 0;\n      }\n      number = parseFloat(item.val);\n      if(!isNaN(number)) { sums[item[type]] += number; }\n      }\n    );\n    return sums;\n  }\n\n  tuenTarve(persentiili){\n    if(isNaN(parseFloat(persentiili))) {return \"-\";}\n    if(persentiili<=6) {return \"Selvästi tuen tarpeessa\";}\n    if (persentiili<=15) {return \"Tuen tarpeessa\";}\n    if (persentiili<=25) {return \"Seurattava\";}\n    else {return \"Ei tuen tarpeessa\";}\n  }\n\n  persentiiliarvo(sisaltopisteet,age){\n    if(typeof(this.state.persentiili[sisaltopisteet]) === 'undefined') { return \"\"; }\n    if(typeof(this.state.persentiili[sisaltopisteet][age]) === 'undefined') { return \"Persentiiliarvo on saatavilla vain 4-8 vuotiaille.\"; }\n    return this.state.persentiili[sisaltopisteet][age];\n  }\n  \n  render() {\n    let resultsView;\n    let inputView;\n    let numberInputs = [];\n\n    //making fields\n    for(let i=0; i<this.state.fieldsInfo.length; i++){\n      let submittable = this.state.fieldSubmittable[i] ? 'submittable' : 'notsubmittable' ; \n      if(this.state.fieldDisabled[i]){submittable='disabled'};\n      let text = this.state.fieldsInfo[i].type===\"Perustelukysymys\" ? this.state.fieldsInfo[i].key+'b:' : this.state.fieldsInfo[i].key+':'; \n      numberInputs.push(\n      <div key={i}>\n        <span className=\"label\">{text}</span>\n        <input id={i} type=\"text\" className={submittable} onFocus={this.handleFocus} onChange={this.handleNumberinput} value={this.state.fieldsInfo[i].val} autoComplete=\"off\"/>\n      </div>\n      )\n    }\n\n    let results = [];\n\n    //laske taulukkoon yhteispisteet kaikille osa-alueille\n    let type = this.sumPoints(this.state.fieldsInfo,\"type\");\n    let pkys = this.sumPoints(this.state.fieldsInfo,\"pkys\");\n   \n    let sisaltopisteet = type[\"KonEiMT\"]+type[\"KonMT\"]+type[\"VäärUsk\"]+type[\"RelevKäyt\"]+type[\"Tunne\"];\n\n    let suhtlPisteet = \"Ei laskettavissa\";\n    if(pkys[1]!==0){\n      suhtlPisteet = (pkys[2]/pkys[1]*100).toFixed(1);\n    }\n\n    let persentiiliarvo = this.persentiiliarvo(sisaltopisteet,this.state.ageField);\n    let tuentarve = this.tuenTarve(persentiiliarvo);\n    \n    if(!this.state.submitDisabled) {\n      results.push(\n        <div key=\"results-field\">\n          <br />\n          KonEiMT: &nbsp; {type[\"KonEiMT\"]} /10<br />\n          KonMT: &nbsp; {type[\"KonMT\"]} /18<br />\n          VäärUsk: &nbsp; {type[\"VäärUsk\"]} /2<br />\n          RelevKäyt: &nbsp; {type[\"RelevKäyt\"]} /4<br />\n          Tunne: &nbsp; {type[\"Tunne\"]} /5<br />\n          Sisältöpisteet: &nbsp; {sisaltopisteet} /39<br />\n          <br />\n          Perustelukysymysten pisteet: &nbsp; {pkys[2]} /13 <br />\n          Perustelukysymysten suhteelliset pisteet: {suhtlPisteet}<br />\n          <br />\n          Persentiiliarvo: {persentiiliarvo} <br />\n          Tuen tarve: {tuentarve}<br />\n          <br />\n        </div>\n      )\n    }\n\n    if(this.state.isInputView){ //Aloitusnäkymä\n    inputView = (\n      <div>\n        <div className=\"bluebar\"></div>\n        <div className=\"inputview\">\n        <form><h2>Pragma-testi</h2>\n        <button className=\"resetbutton\" type='button' onClick={this.handleReset}>Tyhjennä</button>\n        <br /><b>Täyttöohje:</b><br />\n        Merkitse kysymysten pisteet numeroin ja välistä jätetty kysymys merkillä X.<br /><br /><br />\n          <div className=\"age\">\n            <b>Lapsen ikä:</b><input type=\"text\" name=\"ageField\" onChange={this.handleChange} value={this.state.ageField} autoComplete=\"off\"/>\n            &nbsp; <span className=\"errorprompt\">{this.state.ageFieldPromptText}</span>\n          </div>\n          <br /><br /><b>Kysymykset:</b>  <br />\n          <div className=\"numberinputs\">\n            {numberInputs}\n          </div>\n          <button type='button' onClick={this.handleTransition} disabled={this.state.submitDisabled}>Tulostus</button>\n        </form>\n        </div>\n        {results}\n      </div>\n\n    );}\n\n    else { //Tulosnäkymä\n\n      let taulukkoData = [\n        {\n          name: '4-vuotiaat', age: '4', uv: 7, pv: 9, median: 12, alue: [7,19]},\n        {\n          name: '5-vuotiaat', age: '5', uv: 14, pv: 16, median: 22, alue: [14,28]},\n        {\n          name: '6-vuotiaat', age: '6', uv: 23, pv: 25, median: 31, alue: [23,33],},\n        {\n          name: '7-vuotiaat', age: '7', uv: 28, pv: 29, median: 32, alue: [28,36],},\n        {\n          name: '8-vuotiaat', age: '8', uv: 33, pv: 33, median: 36, alue: [33,37],},\n      ];\n\n      //let ageField = this.state.ageField\n      let found = taulukkoData.find(element => element.age === \"5\");\n      if(typeof found !== 'undefined') {\n        found.score = sisaltopisteet\n      }\n      \n\n      //lisätään pisteet\n      //let row = taulukkoData[1]\n      //row.score = 27\n      //taulukkoData[1] = row\n\n\n\n\n      let datab = []\n      for(let i=0; i<this.state.fieldsInfo.length; i++){\n        datab.push({key: i, name: \"Arvo \"+(i+1), Arvo: this.state.fieldsInfo[i]},)\n      }\n      //console.log(datab)\n\n      const renderQuarterTick = (tickProps) => {\n        const { x, y, payload } = tickProps;\n        const { value, offset } = payload;\n        \n      \n        \n        return <text x={x} y={y} textAnchor=\"middle\">{value}</text>;\n\n      };\n\n      const renderCustomAxisTick = ({ x, y, payload }) => {\n        const { value, offset } = payload;\n        return (\n        <svg>\n          <text x={x} y={y+9} textAnchor=\"middle\">{value}</text>\n          <line x1={x+71} y1={y-9} x2={x+71} y2={y - 369} stroke=\"LightGray\" stroke-width=\"0.5\" />\n        </svg>\n        );\n      };\n\n      const yAxisTick = ({ x, y, payload }) => {\n        const { value, offset } = payload;\n        const height = 28.5/3;\n        const width = 800-62;\n        return (\n        <svg>\n          <text x={x-10} y={y+4} textAnchor=\"middle\">{value}</text>\n          <line x1={x+7} y1={y-height} x2={x+width} y2={y-height} stroke=\"LightGray\" stroke-width=\"1\" />\n          <line x1={x+7} y1={y-height*2} x2={x+width} y2={y-height*2} stroke=\"LightGray\" stroke-width=\"1\" />\n         \n  \n        </svg>\n        );\n      };\n\n\n      \n      const renderLineChart = (\n        <div className=\"chart\">\n        <ComposedChart width={800} height={400} data={taulukkoData}>\n\n          <CartesianGrid stroke=\"LightGray\" vertical={false} className='linestyle'/>\n          <XAxis dataKey=\"name\" type=\"category\" domain={['dataMin', 'dataMax']} interval={0} tickLine={false} padding={{ left: 72, right: 72 }} unit=\"\" tick={renderCustomAxisTick} />\n          \n          <YAxis tickCount={14} minTickGap={0} domain={[0, 39]} tick={yAxisTick} label={{ value: 'Kokonaispisteet', angle: -90, position: 'insideLeft', className: 'kokpisteet' }}/>\n\n          <Area dataKey=\"alue\" stroke=\"#888888\" name=\"Tyypillinen suoritusalue\" fill=\"#777777\" strokeWidth={0} isAnimationActive={false}/>\n          <Line dataKey=\"median\" stroke=\"#000000\" name=\"Mediaani\" strokeWidth={1} dot={false} isAnimationActive={false} />\n\n          \n          <Line dataKey=\"pv\" stroke=\"#000000\" name=\"Alaraja 16%\" strokeDasharray=\"2 2\" strokeWidth={2} dot={false} isAnimationActive={false}/>\n          <Line dataKey=\"uv\" stroke=\"#000000\" name=\"Alaraja 25%\" strokeDasharray=\"2 2\" strokeWidth={2} dot={false} isAnimationActive={false} />\n\n\n\n\n          <Scatter name=\"Kokonaispisteet\" dataKey=\"score\" fill=\"black\" />\n\n          \n          <Tooltip label='-vuotiaat' unit='-vuotiaat'/>\n        </ComposedChart>\n        </div>\n      );\n\n      /*\n                Mediaanikäyrä (50%:n persentiilikäyrä)<br />\n        Tyypillinen suoritusalue (15 %-85 % persentiilikäyrien väliin jäävä alue)<br />\n        Tyypillisen suoritusalueen alaraja (16 %-25% persentiiliä)<br />\n        <br />\n      */\n\n      //showing input field values\n      /*\n      let showInputs = [];\n      for(let i=0; i<this.state.fieldsInfo.length; i++){\n        showInputs.push(\n        <div>{this.state.fieldsInfo[i].key}:{this.state.fieldsInfo[i].val}</div>\n        )\n      }\n      */\n      \n      resultsView = (\n      <div className=\"resultsView\">\n        <button onClick={this.handleTransition}>Takaisin</button>\n        <h2>Pragma-testi</h2><br />\n\n        Testaajan nimi: __________________________________<br /><br />\n        Lapsen nimi: __________________________________<br /><br />\n        Lapsen ikä: {this.state.ageField}<br /><br />\n        Testauspäivämäärä: {this.dateNow()}<br />\n        {results}\n        <br />\n        {renderLineChart}\n        <img src=\"selite.png\" alt=\"Linechart\"/><br /><br />\n        (ks. tarkemmin kaavion tulkinnasta testikäsikirjan liite 4)<br />\n        <button className=\"printbutton\" type='button' onClick={window.print}>Tulosta</button>\n      </div>\n      );\n    }\n\n    return (\n      <div>\n        {inputView}\n        {resultsView}\n      </div>\n    );\n  }\n}\n// ========================================\nReactDOM.render(<Formi />, document.getElementById(\"root\"));\n"],"sourceRoot":""}